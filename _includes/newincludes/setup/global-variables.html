<!-- Global variables for liquid -->{% comment %} Deriving baseurl from site.workshop_site {% endcomment %}{% comment %}Get al parts of the url in an array http://swcarpentry.github.io/workshop-template becomes Array["http:", "", "swcarpentry.github.io", "workshop-template"] {% endcomment %}{% assign parts = site.workshop_site | split: '/' %}{% assign partsLength = parts | size %}{% comment %}computing the last index number in the array as arrays a zero numbered, it's length-1{% endcomment %}{% assign lastIndex = partsLength | minus: 1 %}{% comment %} Joining the parts As we dont want the three first parts, we loop over an index range starting at the third position in the array untill the length of the array {% endcomment %}{% capture baseurl %}{% for index in (3...lastIndex) %}/{{ parts[index] }}{% endfor %}{% endcapture %}<!-- baseurl : {{ baseurl }} -->
{% comment %}Here we choose which assets we load distant or fallback (for offline use) In development the server is started with make serve and then, _config_dev.yml overrides _config.yml variables. It also creates a -site.fallbackAssets- variable
fallbackAssets: "/assets-fallback"
This setup is made here to be accessible globally, including includes files
{% endcomment %}<!-- site.distantAssetsPath : {{ site.distantAssetsPath }} - site.distantAssetsUrl : {{ site.distantAssetsUrl }} - site.fallbackAssets : {{ site.fallbackAssets }}-->{% if site.fallbackAssets == NULL %}{% capture assetsFullPath %}{{ site.distantAssetsUrl }}{{ site.distantAssetsPath }}{% endcapture %}<!-- use DISTANT ASSETS  at {{ assetsFullPath }} -->{% else %}{% assign assetsFullPath = site.fallbackAssets %}<!-- use FALLBACK ASSETS at {{ assetsFullPath }} -->{% endif %}
